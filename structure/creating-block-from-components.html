<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/style.css?t=90051322">
    <script src="../assets/script.js?t=93f1a66c"></script>
    <title>Creating Block From Components - Eightshift Frontend Libs</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <ul>
          <li class="menu-item -level-0 -parent">
            <ul class="submenu">
              <li class="menu-item -level-1"><a class="link title  link-index" href="../index.html">Eightshift Frontend Libs</a>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Installation and setup</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-installationinstalation-and-requirements" href="../installation/instalation-and-requirements.html">Installation and Requirements</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-installationregister-webpack" href="../installation/register-webpack.html">Register Webpack</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Structure</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-structureblocks-structure" href="../structure/blocks-structure.html">Blocks Structure</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-structurecomponent-structure" href="../structure/component-structure.html">Component Structure</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-structurecustom-block-structure" href="../structure/custom-block-structure.html">Custom Block Structure</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-structuremanifest-structure" href="../structure/manifest-structure.html">Block Manifest Structure</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title -active link-structurecreating-block-from-components" href="../structure/creating-block-from-components.html">Creating Block From Components</a>
                    <ul class="headings heading-list">
                      <li class="heading-item -depth-3"><a class="hlink link-folder-structure" href="#folder-structure">Folder structure</a>
                      </li>
                      <li class="heading-item -depth-3"><a class="hlink link-manifest" href="#manifest">Manifest</a>
                      </li>
                      <li class="heading-item -depth-3"><a class="hlink link-components" href="#components">Components</a>
                      </li>
                      <li class="heading-item -depth-3"><a class="hlink link-editor-render" href="#editor-render">Editor render</a>
                      </li>
                      <li class="heading-item -depth-3"><a class="hlink link-php-view" href="#php-view">PHP view</a>
                      </li>
                      <li class="heading-item -depth-3"><a class="hlink link-styling" href="#styling">Styling</a>
                      </li>
                    </ul>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-structurelayout" href="../structure/layout.html">Layout</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Helpers</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-helpersjavascript-dynamic-import" href="../helpers/javascript-dynamic-import.html">JavaScript Dynamic Import</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-helpersjavascript-get-actions" href="../helpers/javascript-get-actions.html">JavaScript GetActions</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-helpersphp-render-block-view" href="../helpers/php-render-block-view.html">PHP Render Block View</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Documentation</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-documentationstorybook" href="../documentation/storybook.html">Storybook</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-documentationsassdocs" href="../documentation/sassdocs.html">Sass Docs</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Tips</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-tipstips" href="../tips/tips.html">Useful Tips</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="body page-structurecreating-block-from-components">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/infinum/eightshift-frontend-libs" data-title="infinum/eightshift-frontend-libs">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="creating-block-from-components">Creating Block from Components</h1>
<p>You may wonder: what is the difference between components and blocks? Aren&apos;t they the same thing?</p>
<p>They are similar, but not the same. Components are, for lack of a better word, <em>dumb</em>. They aren&apos;t bothered with the context and they are <strong>reusable</strong>.
This is the key word in this whole ordeal. One component may be reused in different blocks. Also, the main difference is that the component is not registered in WordPress; its sole purpose is to provide reusable parts for your blocks.</p>
<p>Let&apos;s look at an example.
For instance, we want to create a card block. This block consists of an image, a title and a text.</p>
<h3 id="folder-structure">Folder structure</h3>
<p>First we&apos;ll create a block in the <code>src/blocks/custom/card</code> folder. The folder structure will look like this</p>
<pre><code class="lang-shell">|card
| |components
| | |card-editor.js
| | |card-options.js
| |card-block.js
| |card.php
| |card-style.scss
| |manifest.json
</code></pre>
<p>The <code>manifest.json</code> will hold all the default attributes and data about the new block</p>
<h3 id="manifest">Manifest</h3>
<pre><code class="lang-json">{
  <span class="hljs-attr">&quot;blockName&quot;</span>: <span class="pl-s">&quot;card&quot;</span>,
  <span class="hljs-attr">&quot;title&quot;</span>: <span class="pl-s">&quot;Card&quot;</span>,
  <span class="hljs-attr">&quot;description&quot;</span> : <span class="pl-s">&quot;Card with custom settings.&quot;</span>,
  <span class="hljs-attr">&quot;category&quot;</span>: <span class="pl-s">&quot;eightshift&quot;</span>,
  <span class="hljs-attr">&quot;icon&quot;</span>: {
    <span class="hljs-attr">&quot;src&quot;</span>: <span class="pl-s">&quot;buddicons-buddypress-logo&quot;</span>
  },
  <span class="hljs-attr">&quot;keywords&quot;</span>: [
    <span class="pl-s">&quot;Service&quot;</span>,
    <span class="pl-s">&quot;Box&quot;</span>,
    <span class="pl-s">&quot;Card&quot;</span>
  ],
  <span class="hljs-attr">&quot;hasWrapper&quot;</span>: <span class="pl-c1">false</span>,
  <span class="hljs-attr">&quot;parent&quot;</span>: [
    <span class="pl-s">&quot;eightshift-boilerplate/cards-grid&quot;</span>
  ],
  <span class="hljs-attr">&quot;attributes&quot;</span>: {
    <span class="hljs-attr">&quot;media&quot;</span>: {
      <span class="hljs-attr">&quot;type&quot;</span>: <span class="pl-s">&quot;object&quot;</span>,
      <span class="hljs-attr">&quot;default&quot;</span>: {
        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">&quot;url&quot;</span>: <span class="pl-s">&quot;&quot;</span>,
        <span class="hljs-attr">&quot;title&quot;</span>: <span class="pl-s">&quot;&quot;</span>
      },
      <span class="hljs-attr">&quot;items&quot;</span>: {
        <span class="hljs-attr">&quot;type&quot;</span>: <span class="pl-s">&quot;object&quot;</span>
      },
      <span class="hljs-attr">&quot;mediaAction&quot;</span>: <span class="pl-c1">true</span>
    },
    <span class="hljs-attr">&quot;heading&quot;</span>: {
      <span class="hljs-attr">&quot;type&quot;</span>: <span class="pl-s">&quot;string&quot;</span>
    },
    <span class="hljs-attr">&quot;paragraph&quot;</span>: {
      <span class="hljs-attr">&quot;type&quot;</span>: <span class="pl-s">&quot;string&quot;</span>
    }
  }
}
</code></pre>
<h3 id="components">Components</h3>
<p>Next, we want to set up the editor and options component for this block. So in the <code>components</code> folder we&apos;ll add <code>card-editor.js</code> and <code>card-options.js</code> files.</p>
<p><strong>card-editor.js</strong></p>
<pre><code class="lang-js"><span class="pl-k">import</span> React <span class="pl-k">from</span> <span class="pl-s">&apos;react&apos;</span>; <span class="pl-c">// eslint-disable-line no-unused-vars</span>
<span class="pl-k">import</span> { RichText } <span class="pl-k">from</span> <span class="pl-s">&apos;@wordpress/editor&apos;</span>;
<span class="pl-k">import</span> { __ } <span class="pl-k">from</span> <span class="pl-s">&apos;@wordpress/i18n&apos;</span>;
<span class="pl-k">import</span> { ImageEditor } <span class="pl-k">from</span> <span class="pl-s">&apos;../../../components/image/components/image-editor&apos;</span>;

<span class="pl-k">export</span> <span class="pl-k">const</span> CardEditor = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="pl-k">const</span> {
    <span class="hljs-attr">attributes</span>: {
      blockClass,
      heading,
      paragraph,
      media,
    },
    <span class="hljs-attr">actions</span>: {
      onChangeHeading,
      onChangeParagraph,
    },
  } = props;

  <span class="pl-k">return</span> (
    &lt;div className={blockClass}&gt;
      &lt;div className={`${blockClass}__media`}&gt;
        &lt;ImageEditor
          blockClass={blockClass}
          media={media}
        /&gt;
      &lt;/div&gt;
      &lt;div className={`${blockClass}__content`}&gt;
        &lt;div className={`${blockClass}__heading`}&gt;
          &lt;RichText
            placeholder={__(&apos;Add Heading&apos;, &apos;eightshift-boilerplate&apos;)}
            onChange={onChangeHeading}
            value={heading}
          /&gt;
        &lt;/div&gt;
        &lt;div className={`${blockClass}__paragraph`}&gt;
          &lt;RichText
            placeholder={__(&apos;Add Paragraph&apos;, &apos;eightshift-boilerplate&apos;)}
            onChange={onChangeParagraph}
            value={paragraph}
          /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>Notice how we&apos;ve imported the <a href="https://github.com/infinum/eightshift-frontend-libs/blob/develop/blocks/init/components/image/components/image-editor.js"><code>image-editor</code></a> component from the project&apos;s component folder. Note that in your project you&apos;d just copy this component from the frontend-libs blocks (that is you&apos;d copy the entire folder in your project as previously described).</p>
<p>Our card editor component will have an <code>&lt;ImageEditor /&gt;</code> component and two <code>&lt;RichText /&gt;</code> components (which come from the core editor).</p>
<p><strong>card-options.js</strong></p>
<pre><code class="lang-js"><span class="pl-k">import</span> React <span class="pl-k">from</span> <span class="pl-s">&apos;react&apos;</span>; <span class="pl-c">// eslint-disable-line no-unused-vars</span>
<span class="pl-k">import</span> { __ } <span class="pl-k">from</span> <span class="pl-s">&apos;@wordpress/i18n&apos;</span>;
<span class="pl-k">import</span> { PanelBody } <span class="pl-k">from</span> <span class="pl-s">&apos;@wordpress/components&apos;</span>;
<span class="pl-k">import</span> { ImageOptions } <span class="pl-k">from</span> <span class="pl-s">&apos;../../../components/image/components/image-options&apos;</span>;

<span class="pl-k">export</span> <span class="pl-k">const</span> CardOptions = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="pl-k">const</span> {
    <span class="hljs-attr">attributes</span>: {
      media,
    },
    <span class="hljs-attr">actions</span>: {
      onChangeMedia,
    },
  } = props;

  <span class="pl-k">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PanelBody</span> <span class="hljs-attr">title</span>=<span class="pl-s">{__(</span>&apos;<span class="hljs-attr">Card</span> <span class="hljs-attr">Details</span>&apos;, &apos;<span class="hljs-attr">eightshift-boilerplate</span>&apos;)}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ImageOptions</span>
        <span class="hljs-attr">media</span>=<span class="pl-s">{media}</span>
        <span class="hljs-attr">onChangeMedia</span>=<span class="pl-s">{onChangeMedia}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">PanelBody</span>&gt;</span>
  );
};
</span></code></pre>
<p>The options component (the one shown on the right side in the editor screen), will only contain the <code>&lt;ImageOptions /&gt;</code> so that we can upload image in our block.</p>
<h3 id="editor-render">Editor render</h3>
<p>Back to the block, we need to create the <code>edit</code> method functionality and the view that we&apos;ll render on the front.</p>
<p><strong>card-block.js</strong></p>
<pre><code class="lang-js"><span class="pl-k">import</span> React <span class="pl-k">from</span> <span class="pl-s">&apos;react&apos;</span>; <span class="pl-c">// eslint-disable-line no-unused-vars</span>
<span class="pl-k">import</span> { Fragment } <span class="pl-k">from</span> <span class="pl-s">&apos;@wordpress/element&apos;</span>;
<span class="pl-k">import</span> { InspectorControls } <span class="pl-k">from</span> <span class="pl-s">&apos;@wordpress/editor&apos;</span>;
<span class="pl-k">import</span> { getActions } <span class="pl-k">from</span> <span class="pl-s">&apos;EighshiftBlocksGetActions&apos;</span>;
<span class="pl-k">import</span> manifest <span class="pl-k">from</span> <span class="pl-s">&apos;./manifest.json&apos;</span>;
<span class="pl-k">import</span> { CardEditor } <span class="pl-k">from</span> <span class="pl-s">&apos;./components/card-editor&apos;</span>;
<span class="pl-k">import</span> { CardOptions } <span class="pl-k">from</span> <span class="pl-s">&apos;./components/card-options&apos;</span>;
<span class="pl-k">import</span> <span class="pl-s">&apos;./hooks&apos;</span>;

<span class="pl-k">export</span> <span class="pl-k">const</span> Card = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {

  <span class="pl-k">const</span> {
    attributes,
  } = props;

  <span class="pl-k">const</span> actions = getActions(props, manifest);

  <span class="pl-k">return</span> (
    &lt;Fragment&gt;
      &lt;InspectorControls&gt;
        &lt;CardOptions
          attributes={attributes}
          actions={actions}
        /&gt;
      &lt;/InspectorControls&gt;
      &lt;CardEditor
        attributes={attributes}
        actions={actions}
      /&gt;
    &lt;/Fragment&gt;
  );
};
</code></pre>
<p>Here we&apos;ll use our ready made component (built out of other components - reusability), and wrap it in <a href="https://reactjs.org/docs/fragments.html">React Fragment</a>. It is a pattern used so that we can return multiple elements.<br>
Another thing you&apos;ll note is the usage of <code>&lt;InspectorControls /&gt;</code> <a href="https://github.com/WordPress/gutenberg/tree/master/packages/block-editor/src/components/inspector-controls">component</a>. It is used to display settings of the block in the sidebar (in our case our options that contain the image upload component).<br>
Lastly, both our <code>&lt;CardEditor /&gt;</code> and <code>&lt;InspectorControls /&gt;</code> are wrapped in the <code>&lt;Fragment /&gt;</code> wrapper due to Reacts one top-level element rule. If your block doesn&apos;t have Options, you can only have <code>&lt;CardEditor /&gt;</code> component in here.</p>
<h3 id="php-view">PHP view</h3>
<p>So all we need now is the PHP view.</p>
<p><strong>card.php</strong></p>
<pre><code class="lang-php">&lt;?php
/**
 * Template for the Card Block.
 *
 * @since 1.0.0
 * @package Eightshift_Boilerplate\Blocks.
 */

namespace Eightshift_Boilerplate\Blocks;

$heading   = $attributes[&apos;heading&apos;] ?? &apos;&apos;;
$paragraph = $attributes[&apos;paragraph&apos;] ?? &apos;&apos;;
$media     = $attributes[&apos;media&apos;] ?? [];

$block_class = $attributes[&apos;blockClass&apos;] ?? &apos;&apos;;

?&gt;

&lt;div class=&quot;&lt;?php echo esc_attr( $block_class ); ?&gt;&quot;&gt;

  &lt;?php if ( ! empty( $media ) ) { ?&gt;
    &lt;div class=&quot;&lt;?php echo esc_attr( &quot;{$block_class}__media&quot; ); ?&gt;&quot;&gt;
      &lt;?php $this-&gt;render_block_view(
        &apos;/components/image/image.php&apos;,
        [
          &apos;blockClass&apos; =&gt; $attributes[&apos;blockClass&apos;] ?? &apos;&apos;,
          &apos;media&apos;      =&gt; $media,
        ]
      );
      ?&gt;
    &lt;/div&gt;
  &lt;?php } ?&gt;

  &lt;div class=&quot;&lt;?php echo esc_attr( &quot;{$block_class}__content&quot; ); ?&gt;&quot;&gt;
    &lt;?php if ( ! empty( $heading ) ) { ?&gt;
      &lt;div class=&quot;&lt;?php echo esc_attr( &quot;{$block_class}__heading&quot; ); ?&gt;&quot;&gt;
        &lt;?php echo wp_kses_post( $heading ); ?&gt;
      &lt;/div&gt;
    &lt;?php } ?&gt;

    &lt;?php if ( ! empty( $paragraph ) ) { ?&gt;
      &lt;div class=&quot;&lt;?php echo esc_attr( &quot;{$block_class}__paragraph&quot; ); ?&gt;&quot;&gt;
        &lt;?php echo wp_kses_post( $paragraph ); ?&gt;
      &lt;/div&gt;
    &lt;?php } ?&gt;
  &lt;/div&gt;

&lt;/div&gt;

</code></pre>
<p>Notice how we used</p>
<pre><code class="lang-php"><span class="hljs-meta">&lt;?php</span> <span class="pl-k">$this</span>-&gt;render_block_view(
  <span class="pl-s">&apos;/components/image/image.php&apos;</span>,
  [
    <span class="pl-s">&apos;blockClass&apos;</span> =&gt; $attributes[<span class="pl-s">&apos;blockClass&apos;</span>] ?? <span class="pl-s">&apos;&apos;</span>,
    <span class="pl-s">&apos;media&apos;</span>      =&gt; $media,
  ]
);
<span class="hljs-meta">?&gt;</span>
</code></pre>
<p>To render out our <code>image</code> component. Again, we&apos;re showing the power of reusability here.</p>
<h3 id="styling">Styling</h3>
<p>You can style them how you want, but we added some default styles</p>
<p><strong>card-style.scss</strong></p>
<pre><code class="lang-scss"><span class="hljs-variable">$block-card</span>: (
  heading: (
    mobile: (
      font-size: <span class="hljs-number">24px</span>,
      line-height: <span class="hljs-number">1.33</span>,
    ),
  ),
  paragraph: (
    mobile: (
      font-size: <span class="hljs-number">18px</span>,
      line-height: <span class="hljs-number">1.5</span>,
    ),
  ),
);

<span class="hljs-selector-class">.block-card</span> {
  <span class="hljs-variable">$this</span>: &amp;;

  &amp;__media {
    <span class="pl-e">margin-bottom</span>: <span class="hljs-number">25px</span>;
  }

  &amp;__img {
    <span class="pl-e">margin</span>: <span class="hljs-number">0</span> auto;
  }

  &amp;__content {
    <span class="pl-e">text-align</span>: center;
  }

  &amp;__heading {
    <span class="pl-k">@include</span> responsive(<span class="hljs-variable">$block-card</span>, heading);
    <span class="pl-e">font-weight</span>: bold;
  }

  &amp;__paragraph {
    <span class="pl-k">@include</span> responsive(<span class="hljs-variable">$block-card</span>, paragraph);
    <span class="pl-e">margin-top</span>: <span class="hljs-number">15px</span>;
  }
}
</code></pre>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="../structure/manifest-structure.html"><span class="title">Block Manifest Structure</span></a></div>
          <div class="right"><a href="../structure/layout.html"><span class="label">Next: </span><span class="title">Layout</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>